# 专注时长测算App - 产品需求文档

## 产品概述

**产品名称**: 专注时长测算（暂定）
**平台**: iOS专属
**核心功能**: 基于iOS系统API和健康数据，自动测算用户每日专注时长，用极简美学展示

## 产品定位

从"游戏化激励工具"升级为"iOS系统级专注时长自动记录器"，用**数据洞察+视觉美感**替代复杂的游戏化设计。

## 目标用户

- 学生群体：需要了解学习专注情况
- 职场人士：希望量化工作效率
- 自律爱好者：关注数据化生活管理
- iPhone深度用户：习惯使用系统原生功能

## 核心功能需求

### 1. 全自动专注检测
**数据来源组合：**
- **Apple健康数据**: 正念训练、运动状态
- **CoreMotion**: 设备静止检测（手机放在桌上）
- **通知统计**: 通过通知频率判断打断情况
- **屏幕状态**: 结合屏幕开启/关闭时间

**专注时间判定逻辑：**
```
专注时间 = 连续静止时长 + 正念训练时长 - 高频打断时长
静止权重：设备静止超过80%时间
打断权重：通知频率<阈值（每30分钟<2次）
```

### 2. 极简数据展示

**主屏幕设计：**
- 巨型数字显示今日专注时间（占屏幕70%）
- 渐变色彩根据专注时长变化（浅蓝→深蓝→金色）
- 微交互：每次刷新时的数字增长动画

**三个核心图表：**
- **今日时间轴**: 水平线条，绿色=专注时段
- **本周趋势**: 7根柱状图，超过平均值金色显示
- **月度圆环**: 专注天数/总天数

### 3. iOS深度集成

**小组件（3种尺寸）：**
- **小号**: 今日专注时间 + 与昨日对比
- **中号**: 专注时间 + 拿起手机次数 + 最佳时段
- **大号**: 本周趋势柱状图

**智能推送：**
- **晨间总结**（8:00）：昨日专注时间 + 本周趋势
- **实时洞察**（专注中断时）："专注了45分钟，很棒！"
- **睡前总结**（21:00）：全天专注总结 + 明日建议

### 4. 数据准确性方案

**混合检测策略：**
- **API监控**: 健康运动数据 + 设备状态
- **用户校准**: 每周引导用户上传屏幕使用时间截图
- **机器学习**: 基于用户行为模式优化检测算法

## 非功能需求

### 1. 隐私保护
- 所有数据处理本地完成
- 不上传任何个人使用数据
- 支持iCloud隐私同步（端到端加密）
- 符合Apple隐私政策和GDPR要求

### 2. 用户体验
- **零学习成本**: 安装即用，无需复杂设置
- **零打扰**: 专注期间自动免打扰
- **零手动操作**: 无需开始/结束专注计时

### 3. 性能要求
- 后台运行功耗<5%/天
- 冷启动时间<2秒
- 支持iOS 15.0以上版本

## 版本规划

### V1.0 MVP（1.5-2周）
**必备功能：**
- [ ] 基于健康数据的自动专注检测
- [ ] 今日专注时间主屏幕显示
- [ ] iOS小组件（小号+中号）
- [ ] 每日推送总结

**删除功能：**
- ❌ 游戏化等级系统
- ❌ 社交功能
- ❌ 复杂统计分析
- ❌ 手动开始/结束计时

### 后续版本
- V2.0: 截图识别 + 历史数据分析
- V3.0: AI个性化建议 + 模式识别
- V4.0: 跨设备同步 + 家庭共享

## 技术限制说明

**已知限制：**
- 无法直接获取系统级应用使用数据（Apple限制）
- 需要用户授权健康数据访问
- 检测精度约85%（依赖传感器和环境）
- 部分功能需要iOS 16+支持

## 成功指标

**核心指标：**
- 日活跃用户专注时间记录准确率>90%
- 用户7日留存率>60%
- 平均每日使用时长<30秒（被动使用）
- App Store评分>4.5星

**用户体验指标：**
- 首次安装到首次看到专注数据<24小时
- 用户手动校准频率<每周1次
- 推送开启率>70%